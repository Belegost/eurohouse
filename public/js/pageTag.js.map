{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/import/pages/tag-page.js"],"names":["document","addEventListener","event","TagPag","id","window","location","href","split","length","title","querySelector","result","breadcrumb","setData","self","get","url","Promise","resolve","reject","req","XMLHttpRequest","open","onload","status","response","Error","statusText","onerror","send","getJSON","then","JSON","parse","data","innerText","attributes","relationships","tags","getImages","i","counter","push","uri","timerID","setInterval","clearInterval","list","link","origin","img","project","element","insertAdjacentHTML","init"],"mappings":"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","file":"pageTag.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/import/pages/tag-page.js\");\n","'use strict';\n\ndocument.addEventListener(\"DOMContentLoaded\", function(event) {\n    const TagPag = {\n        id: window.location.href.split('/')[window.location.href.split('/').length - 1],\n        title: document.querySelector('.tag__h1'),\n        result: document.querySelector('.tag__result'),\n        breadcrumb: document.querySelector('.tag__page--active'),\n        \n        setData: function() {\n            let self = this;\n\n            function get(url) {\n                return new Promise(function(resolve, reject) {\n                    let req = new XMLHttpRequest();\n                    req.open('GET', url);\n                    req.onload = function() {\n                        if (req.status == 200) {\n                            resolve(req.response);\n                        } else {\n                            window.location.href = '/404';\n                            reject(Error(req.statusText));\n                        }\n                    }\n\n                    req.onerror = function() {\n                        reject(Error('Network Error'));\n                    }\n\n                    req.send();\n                });\n            }\n\n            function getJSON(url) {\n                return get(url).then(JSON.parse);\n            }\n\n            getJSON(`https://admin.eurohouse.ca/tag/${this.id}`).then(function(data) {\n\n                self.title.innerText = data.data.attributes.title;\n                self.breadcrumb.innerText = data.data.attributes.title;\n                self.result.innerText = `${data.data.relationships.length} result`;\n\n                let tags = [];\n\n                function getImages() {\n                    return new Promise((resolve, reject) => {\n                        \n                        for (let i = 0; i < data.data.relationships.length; i++) {\n                            getJSON(`https://admin.eurohouse.ca/image/${data.data.relationships[i].id}`).then(function(data) {\n                                let counter = data.data.relationships.length;\n        \n                                tags.push({uri: data.data.attributes.uri, id: data.data.relationships[(counter - 1)].id});\n\n                            });\n                        }\n\n                        let timerID = setInterval(function() {\n                            if (tags.length == data.data.relationships.length) {\n                                resolve(tags);\n                                clearInterval(timerID);\n                            }\n                        }, 100);\n\n                    });\n                }\n\n                getImages().then(function(tags) {\n                    let list = document.querySelector('.tag__list');\n                    let link = window.location.origin;\n\n                    for (let i = 0; i < tags.length; i++) {\n                        let img = `https://admin.eurohouse.ca/static${tags[i].uri}`;\n                        \n                        if (tags[i].id != null) {\n                            getJSON(`https://admin.eurohouse.ca/project/${tags[i].id}`).then(function(project) {\n                                let element = `\n                                <div class=\"tag__item\">\n                                    <a data-fancybox=\"gallery\" href=\"${img}\"><img src=\"${img}\" width=\"100%\"></a>\n                                    <a class=\"tag__name\" href=\"${link}/project/${project.data.id}\">\n                                        ${project.data.attributes.title}\n                                        <span>\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30.725\" height=\"16.707\" viewBox=\"0 0 30.725 16.707\">\n                                                <defs>\n                                                    <style>\n                                                        .prefix__cls-1{fill:none;stroke:#000}\n                                                    </style>\n                                                </defs>\n                                                <g id=\"prefix__Group_7490\" data-name=\"Group 7490\" transform=\"translate(0 .354)\">\n                                                    <path id=\"prefix__Path_3250\" d=\"M0 16l8-8-8-8\" class=\"prefix__cls-1\" data-name=\"Path 3250\" transform=\"translate(22.018)\"/>\n                                                    <path id=\"prefix__Path_3251\" d=\"M29.49 0H0\" class=\"prefix__cls-1\" data-name=\"Path 3251\" transform=\"translate(0 8)\"/>\n                                                </g>\n                                            </svg>\n                                        </span>\n                                    </a>\n                                </div>`;\n                                list.insertAdjacentHTML('beforeend', element);\n                            });\n                        }\n                    }\n                });\n            });\n        },\n        init: function() {\n            this.setData();\n        }\n    }\n    \n    TagPag.init();\n});"],"sourceRoot":""}