{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/import/pages/home-page.js"],"names":["document","addEventListener","event","OurProjectMenu","menu","querySelector","buttons","querySelectorAll","projects","closeButton","logo","menuTitle","state","openMenu","self","classList","add","remove","setData","get","url","Promise","resolve","reject","req","XMLHttpRequest","open","onload","status","response","Error","statusText","onerror","send","getJSON","then","JSON","parse","data","project","i","length","attributes","is_published","id","title","imgID","relationships","priority","sortProjects","getImages","prop","push","sort","a","b","imgURI","projectsCount","Object","keys","img","uri","timerID","setInterval","clearInterval","list","createElement","href","style","cssText","appendChild","init"],"mappings":"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","file":"pageHome.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/import/pages/home-page.js\");\n","'use strict';\n\ndocument.addEventListener(\"DOMContentLoaded\", function(event) {\n    const OurProjectMenu = {\n        menu: document.querySelector('.our-projects'),\n        buttons: document.querySelectorAll('.ourProjectsBtn'),\n        projects: document.querySelectorAll('.our-projects__project'),\n        closeButton: document.querySelector('.closeBtnProject'),\n        logo: document.querySelector('.header__logo'),\n        menuTitle: document.querySelector('.our-projects__title'),\n        state: false,\n\n        openMenu: function() {\n            const self = this;\n\n            this.menu.addEventListener('mouseenter', function() {\n                self.menu.classList.add('our-projects--open');\n                self.logo.classList.add('header__logo--open');\n            });\n\n            this.menu.addEventListener('mouseleave', function() {\n                self.menu.classList.remove('our-projects--open');\n                self.logo.classList.remove('header__logo--open');\n            });\n        },\n        setData: function() {\n            function get(url) {\n                return new Promise(function(resolve, reject) {\n                    let req = new XMLHttpRequest();\n                    req.open('GET', url);\n                    req.onload = function() {\n                        if (req.status == 200) {\n                            resolve(req.response);\n                        } else {\n                            reject(Error(req.statusText));\n                        }\n                    }\n\n                    req.onerror = function() {\n                        reject(Error('Network Error'));\n                    }\n\n                    req.send();\n                });\n            }\n\n            function getJSON(url) {\n                return get(url).then(JSON.parse);\n            }\n\n            getJSON('https://admin.eurohouse.ca/project/list').then(function(data) {\n                let project = {};\n\n                for (let i = 0; i < data.data.length; i++) {\n                    if (data.data[i].attributes.is_published) {\n\n                        project[i] = {\n                            id: data.data[i].id,\n                            title: data.data[i].attributes.title,\n                            imgID: data.data[i].relationships[0].id,\n                            priority: data.data[i].attributes.priority\n                        };\n                    }\n                }\n\n                return { project };\n            }).then(function(data) {\n                let sortProjects = [];\n\n                function getImages() {\n                    for (let prop in data.project) {\n                        sortProjects.push([data.project[prop].priority, data.project[prop]]);\n                    }\n\n                    sortProjects.sort(function(a, b) {\n                        return a[0] - b[0];\n                    });\n\n                    return new Promise((resolve, reject) => {\n                        let imgURI = [];\n                        let projectsCount = Object.keys(data.project).length;\n\n\n                        for (let prop in data.project) {\n                            getJSON(`https://admin.eurohouse.ca/image/${data.project[prop].imgID}`).then(function(img) {\n                                data.project[prop].imgURI = img.data.attributes.uri;\n                                imgURI.push(img.data.attributes.uri);\n                            });\n                        }\n\n                        let timerID = setInterval(function() {\n                            if (imgURI.length == projectsCount) {\n                                resolve();\n                                clearInterval(timerID);\n                            }\n                        }, 100);\n                    });\n                }\n\n                getImages().then(function() {\n                    for (let i = 0; i < sortProjects.length; i++) {\n                        let list = document.querySelector('.our-projects__menu');\n                        let project = document.createElement('a');\n\n                        project.classList.add('our-projects__project');\n\n                        project.href = `/project/${sortProjects[i][1].id}`;\n                        project.style.cssText = `background-image: url(https://admin.eurohouse.ca/static${sortProjects[i][1].imgURI}); transition-delay: ${(i * 100) + 300}ms;`;\n\n                        list.appendChild(project);\n                    }\n                });\n            });\n        },\n        init: function() {\n            this.openMenu();\n            this.setData();\n        }\n    }\n    \n    OurProjectMenu.init();\n});"],"sourceRoot":""}